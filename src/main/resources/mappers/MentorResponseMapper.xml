<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.example.DAO.MentorResponseDAO">

  <!-- 1. 슬러그로 멘토 목록 조회 -->
  <select id="getMentorsBySlug" resultType="com.example.dto.MentorResponseDTO">
    SELECT DISTINCT
      m.mentor_id AS id,
      u.name AS name,
      m.introduction,
      m.score AS rating,
      m.student_count AS students,
      CONCAT(m.experience_years, '년') AS experience
    FROM subject s
    JOIN mentor_subject ms ON s.subject_id = ms.subject_id
    JOIN mentor m ON ms.mentor_id = m.mentor_id
    JOIN member u ON m.user_id = u.user_id
    WHERE s.slug = #{slug}
  </select>

  <!-- 2. 멘토별 specialties 조회 -->
  <select id="getSpecialtiesByMentorId" resultType="string">
    SELECT specialty
    FROM mentor_specialty
    WHERE mentor_id = #{mentorId}
  </select>

</mapper>
